<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Administrar Usuarios - Break Shoes</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
  <div class="d-flex" style="min-height: 80vh;">
    <!-- Sidebar -->
    <aside class="bg-light border-end" style="width:220px;min-height:100%;">
      <div class="p-3">
        <h5 class="fw-bold mb-4"><img src="https://cdn-icons-png.flaticon.com/512/25/25694.png" width="24" class="me-2">Company</h5>
        <ul class="nav flex-column mb-4">
          <li class="nav-item mb-2"><a class="nav-link text-dark" href="#"><i class="bi bi-grid"></i> Dashboard</a></li>
          <li class="nav-item mb-2"><a class="nav-link text-dark" href="#"><i class="bi bi-list"></i> Orders</a></li>
          <li class="nav-item mb-2"><a class="nav-link text-dark" href="#"><i class="bi bi-box"></i> Inventory</a></li>
          <li class="nav-item mb-2"><a class="nav-link text-dark" href="#"><i class="bi bi-bar-chart"></i> Reports</a></li>
          <li class="nav-item mb-2"><a class="nav-link text-dark" href="#"><i class="bi bi-people"></i> Employees</a></li>
        </ul>
      </div>
    </aside>
    <!-- Main Panel -->
    <main class="flex-grow-1 bg-white p-4">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="fw-bold">Usuarios</h2>
        <a href="admin-nuevo-usuario.html" class="btn btn-dark">NUEVO USUARIO</a>
      </div>
      <div class="card p-3 mb-3">
        <div class="d-flex justify-content-between align-items-center mb-2">
          <span class="fw-bold">All Sales Orders</span>
          <button class="btn btn-outline-secondary btn-sm">▼</button>
        </div>
        <div class="table-responsive">
          <table class="table table-bordered table-hover bg-white mb-0">
            <thead class="table-dark">
              <tr>
                <th>Date</th>
                <th>Order #</th>
                <th>Customer</th>
                <th>Status</th>
                <th>Amount</th>
              </tr>
            </thead>
            <tbody>
              <!-- Aquí iría el render dinámico de usuarios/productos -->
              <tr><td>2024-06-02</td><td>SO1001</td><td>Acme Corporation</td><td>Shipped</td><td>$2500.00</td></tr>
              <tr><td>2024-06-02</td><td>SO1002</td><td>Brave Solutions</td><td>Pending</td><td>$1200.00</td></tr>
              <tr><td>2024-06-03</td><td>SO1003</td><td>Charlie's Workshop</td><td>Cancelled</td><td>$500.00</td></tr>
              <tr><td>2024-06-04</td><td>SO1004</td><td>Delta Retail</td><td>Processing</td><td>$750.00</td></tr>
              <tr><td>2024-06-05</td><td>SO1005</td><td>Echo Enterprises</td><td>Shipped</td><td>$3000.00</td></tr>
              <tr><td>2024-06-06</td><td>SO1006</td><td>Foxtrot Media</td><td>Pending</td><td>$1150.00</td></tr>
              <tr><td>2024-06-07</td><td>SO1007</td><td>Golf Goods Inc.</td><td>Shipped</td><td>$2300.00</td></tr>
              <tr><td>2024-06-08</td><td>SO1008</td><td>Hotel Harmony</td><td>Processing</td><td>$900.00</td></tr>
              <tr><td>2024-06-09</td><td>SO1009</td><td>Indi IT Solutions</td><td>Cancelled</td><td>$600.00</td></tr>
              <tr><td>2024-06-10</td><td>SO1010</td><td>Juliett Services</td><td>Shipped</td><td>$1850.00</td></tr>
              <tr><td>2024-06-11</td><td>SO1011</td><td>Kilo Retail Group</td><td>Pending</td><td>$2750.00</td></tr>
              <tr><td>2024-06-12</td><td>SO1012</td><td>Lima Landscaping</td><td>Shipped</td><td>$840.00</td></tr>
              <tr><td>2024-06-13</td><td>SO1013</td><td>Mike's Mechanics</td><td>Processing</td><td>$450.00</td></tr>
              <tr><td>2024-06-14</td><td>SO1014</td><td>November Nightlife</td><td>Shipped</td><td>$3250.00</td></tr>
              <tr><td>2024-06-15</td><td>SO1015</td><td>Oscar Outdoors</td><td>Cancelled</td><td>$1300.00</td></tr>
              <tr><td>2024-06-15</td><td>SO1016</td><td>Papa Pharmaceuticals</td><td>Pending</td><td>$4800.00</td></tr>
              <tr><td>2024-06-16</td><td>SO1017</td><td>Quebec Quilts</td><td>Processing</td><td>$1200.00</td></tr>
              <tr><td>2024-06-17</td><td>SO1018</td><td>Romeo Restaurants</td><td>Shipped</td><td>$2100.00</td></tr>
              <tr><td>2024-06-18</td><td>SO1019</td><td>Sierra Studios</td><td>Pending</td><td>$3360.00</td></tr>
              <tr><td>2024-06-19</td><td>SO1020</td><td>Tango Tech</td><td>Shipped</td><td>$5500.00</td></tr>
            </tbody>
          </table>
        </div>
        <nav aria-label="Page navigation" class="mt-3">
          <ul class="pagination justify-content-center">
            <li class="page-item"><a class="page-link" href="#">&laquo;</a></li>
            <li class="page-item"><a class="page-link" href="#">1</a></li>
            <li class="page-item"><a class="page-link" href="#">2</a></li>
            <li class="page-item"><a class="page-link" href="#">3</a></li>
            <li class="page-item active"><a class="page-link" href="#">4</a></li>
            <li class="page-item"><a class="page-link" href="#">5</a></li>
            <li class="page-item"><a class="page-link" href="#">&raquo;</a></li>
          </ul>
        </nav>
      </div>
    </main>
  </div>
  <script>
    function cargarUsuarios() {
      const usuarios = JSON.parse(localStorage.getItem("usuarios")) || [];
      const tbody = document.getElementById("usuarios-body");
      tbody.innerHTML = usuarios.map((u, idx) => `
        <tr>
          <td>${u.run}</td>
          <td>${u.nombre}</td>
          <td>${u.apellidos}</td>
          <td>${u.correo}</td>
          <td>${u.direccion}</td>
          <td>
            <button class='btn btn-info btn-sm' onclick='mostrarUsuario(${idx})'>Mostrar</button>
            <button class='btn btn-warning btn-sm' onclick='editarUsuario(${idx})'>Editar</button>
          </td>
        </tr>
      `).join("");
    }
    function mostrarUsuario(idx) {
      const usuarios = JSON.parse(localStorage.getItem("usuarios")) || [];
      const u = usuarios[idx];
      document.getElementById("detalle-usuario").innerHTML = `
        <div class='card p-3'>
          <h5>Detalle de usuario</h5>
          <ul>
            <li><b>RUN:</b> ${u.run}</li>
            <li><b>Nombre:</b> ${u.nombre}</li>
            <li><b>Apellidos:</b> ${u.apellidos}</li>
            <li><b>Correo:</b> ${u.correo}</li>
            <li><b>Dirección:</b> ${u.direccion}</li>
          </ul>
        </div>
      `;
    }
    function editarUsuario(idx) {
      const usuarios = JSON.parse(localStorage.getItem("usuarios")) || [];
      const u = usuarios[idx];
      document.getElementById("detalle-usuario").innerHTML = `
        <div class='card p-3'>
          <h5>Editar usuario</h5>
          <form id='formEditar'>
            <div class='mb-2'><label>RUN</label><input class='form-control' id='editRun' value='${u.run}'></div>
            <div class='mb-2'><label>Nombre</label><input class='form-control' id='editNombre' value='${u.nombre}'></div>
            <div class='mb-2'><label>Apellidos</label><input class='form-control' id='editApellidos' value='${u.apellidos}'></div>
            <div class='mb-2'><label>Correo</label><input class='form-control' id='editCorreo' value='${u.correo}'></div>
            <div class='mb-2'><label>Dirección</label><input class='form-control' id='editDireccion' value='${u.direccion}'></div>
            <button type='submit' class='btn btn-success btn-sm'>Guardar</button>
          </form>
        </div>
      `;
      document.getElementById('formEditar').onsubmit = function(e) {
        e.preventDefault();
        usuarios[idx] = {
          run: document.getElementById('editRun').value,
          nombre: document.getElementById('editNombre').value,
          apellidos: document.getElementById('editApellidos').value,
          correo: document.getElementById('editCorreo').value,
          direccion: document.getElementById('editDireccion').value,
          clave: u.clave
        };
        localStorage.setItem("usuarios", JSON.stringify(usuarios));
        cargarUsuarios();
        mostrarUsuario(idx);
        alert('Usuario actualizado');
      };
    }
    document.addEventListener("DOMContentLoaded", cargarUsuarios);
  </script>
</body>
</html>
