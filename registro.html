<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Registrar Usuario - Break Shoes</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/estilos.css">
</head>
<body class="bg-white">

  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg bg-primary navbar-dark shadow-sm">
    <div class="container-fluid">
      <a class="navbar-brand fw-bold" href="index.html">üëü Break Shoes</a>
      <button class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#menu">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="menu">
        <ul class="navbar-nav me-auto">
          <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="productos.html">Productos</a></li>
          <li class="nav-item"><a class="nav-link" href="nosotros.html">Nosotros</a></li>
          <li class="nav-item"><a class="nav-link" href="blogs.html">Blogs</a></li>
          <li class="nav-item"><a class="nav-link" href="contacto.html">Contacto</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <main class="bg-primary min-vh-100 d-flex flex-column justify-content-center align-items-center">
    <div class="row justify-content-center w-100">
      <div class="col-md-5 col-lg-4">
        <div class="card shadow-lg rounded-4">
          <div class="card-header text-center bg-light">
            <h5 class="mb-0">¬°Crea tu cuenta y √∫nete a la familia Break Shoes!</h5>
          </div>
          <div class="card-body">
            <form id="formRegistro">
              <div class="mb-3">
                <label for="nombre" class="form-label">NOMBRE COMPLETO</label>
                <input type="text" class="form-control" id="nombre" required>
              </div>
              <div class="mb-3">
                <label for="correo1" class="form-label">CORREO</label>
                <input type="email" class="form-control" id="correo1" required>
              </div>
              <div class="mb-3">
                <label for="correo2" class="form-label">CORREO</label>
                <input type="email" class="form-control" id="correo2" required>
              </div>
              <div class="mb-3">
                <label for="password1" class="form-label">CONTRASE√ëA</label>
                <input type="password" class="form-control" id="password1" required>
              </div>
              <div class="mb-3">
                <label for="password2" class="form-label">CONFIRMAR CONTRASE√ëA</label>
                <input type="password" class="form-control" id="password2" required>
              </div>
              <div class="mb-3">
                <label for="telefono" class="form-label">TEL√âFONO (opcional)</label>
                <input type="text" class="form-control" id="telefono">
              </div>
              <div class="row mb-3">
                <div class="col-md-6">
                  <label for="region" class="form-label">Regi√≥n</label>
                  <select class="form-select" id="region" required>
                    <option value="">- Seleccione la regi√≥n -</option>
                    <option value="Arica y Parinacota">Arica y Parinacota</option>
                    <option value="Tarapac√°">Tarapac√°</option>
                    <option value="Antofagasta">Antofagasta</option>
                    <option value="Atacama">Atacama</option>
                    <option value="Coquimbo">Coquimbo</option>
                    <option value="Valpara√≠so">Valpara√≠so</option>
                    <option value="Metropolitana">Regi√≥n Metropolitana de Santiago</option>
                    <option value="O'Higgins">Libertador General Bernardo O'Higgins</option>
                    <option value="Maule">Maule</option>
                    <option value="√ëuble">√ëuble</option>
                    <option value="Biob√≠o">Biob√≠o</option>
                    <option value="Araucan√≠a">Araucan√≠a</option>
                    <option value="Los R√≠os">Los R√≠os</option>
                    <option value="Los Lagos">Los Lagos</option>
                    <option value="Ays√©n">Ays√©n del General Carlos Ib√°√±ez del Campo</option>
                    <option value="Magallanes">Magallanes y de la Ant√°rtica Chilena</option>
                  </select>
                </div>
                <div class="col-md-6">
                  <label for="comuna" class="form-label">Comuna</label>
                  <select class="form-select" id="comuna" required>
                    <option value="">- Seleccione la comuna -</option>
                  </select>
                </div>
              </div>
              <div class="d-grid">
                <button type="submit" class="btn btn-outline-dark">Registrarme ahora</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- FOOTER -->
  <footer class="bg-primary text-white text-center py-4 mt-5 shadow-lg">
    <div class="container">
  <p class="mb-0">&copy; 2025 Break Shoes - ¬°Gracias por confiar en nosotros!</p>
    </div>
  </footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>

<script>
// Regiones y comunas de Chile
const regionesComunas = {
  "Arica y Parinacota": ["Arica", "Camarones", "Putre", "General Lagos"],
  "Tarapac√°": ["Iquique", "Alto Hospicio", "Pozo Almonte", "Cami√±a", "Colchane", "Huara", "Pica"],
  "Antofagasta": ["Antofagasta", "Mejillones", "Sierra Gorda", "Taltal", "Calama", "Ollag√ºe", "San Pedro de Atacama", "Tocopilla", "Mar√≠a Elena"],
  "Atacama": ["Copiap√≥", "Caldera", "Tierra Amarilla", "Cha√±aral", "Diego de Almagro", "Vallenar", "Alto del Carmen", "Freirina", "Huasco"],
  "Coquimbo": ["La Serena", "Coquimbo", "Andacollo", "La Higuera", "Paiguano", "Vicu√±a", "Illapel", "Canela", "Los Vilos", "Salamanca", "Ovalle", "Combarbal√°", "Monte Patria", "Punitaqui", "R√≠o Hurtado"],
  "Valpara√≠so": ["Valpara√≠so", "Casablanca", "Conc√≥n", "Juan Fern√°ndez", "Puchuncav√≠", "Quintero", "Vi√±a del Mar", "Isla de Pascua", "Los Andes", "Calle Larga", "Rinconada", "San Esteban", "La Ligua", "Cabildo", "Papudo", "Petorca", "Zapallar", "Quillota", "La Calera", "La Cruz", "Nogales", "San Antonio", "Algarrobo", "Cartagena", "El Quisco", "El Tabo", "Santo Domingo", "San Felipe", "Catemu", "Llay Llay", "Panquehue", "Putaendo", "Santa Mar√≠a"],
  "Metropolitana": ["Cerrillos", "Cerro Navia", "Conchal√≠", "El Bosque", "Estaci√≥n Central", "Huechuraba", "Independencia", "La Cisterna", "La Florida", "La Granja", "La Pintana", "La Reina", "Las Condes", "Lo Barnechea", "Lo Espejo", "Lo Prado", "Macul", "Maip√∫", "√ëu√±oa", "Pedro Aguirre Cerda", "Pe√±alol√©n", "Providencia", "Pudahuel", "Puente Alto", "Quilicura", "Quinta Normal", "Recoleta", "Renca", "San Joaqu√≠n", "San Miguel", "San Ram√≥n", "Vitacura", "Pirque", "Puente Alto", "San Jos√© de Maipo", "Colina", "Lampa", "Tiltil", "Buin", "Calera de Tango", "Paine", "San Bernardo", "Alhu√©", "Curacav√≠", "Mar√≠a Pinto", "Melipilla", "San Pedro", "Talagante", "El Monte", "Isla de Maipo", "Padre Hurtado", "Pe√±aflor"],
  "O'Higgins": ["Rancagua", "Codegua", "Coinco", "Coltauco", "Do√±ihue", "Graneros", "Las Cabras", "Machal√≠", "Malloa", "Mostazal", "Olivar", "Peumo", "Pichidegua", "Quinta de Tilcoco", "Rengo", "Requ√≠noa", "San Vicente", "Pichilemu", "La Estrella", "Litueche", "Marchihue", "Navidad", "Paredones", "San Fernando", "Ch√©pica", "Chimbarongo", "Lolol", "Nancagua", "Palmilla", "Peralillo", "Placilla", "Pumanque", "Santa Cruz"],
  "Maule": ["Talca", "Constituci√≥n", "Curepto", "Empedrado", "Maule", "Pelarco", "Pencahue", "R√≠o Claro", "San Clemente", "San Rafael", "Cauquenes", "Chanco", "Pelluhue", "Curic√≥", "Huala√±√©", "Licant√©n", "Molina", "Rauco", "Romeral", "Sagrada Familia", "Teno", "Vichuqu√©n", "Linares", "Colb√∫n", "Longav√≠", "Parral", "Retiro", "San Javier", "Villa Alegre", "Yerbas Buenas"],
  "√ëuble": ["Cobquecura", "Coelemu", "Ninhue", "Portezuelo", "Quirihue", "R√°nquil", "Treguaco", "Bulnes", "Chill√°n", "Chill√°n Viejo", "El Carmen", "Pemuco", "Pinto", "Quill√≥n", "San Ignacio", "Yungay", "San Carlos", "San Fabi√°n", "San Nicol√°s"],
  "Biob√≠o": ["Concepci√≥n", "Coronel", "Chiguayante", "Florida", "Hualqui", "Lota", "Penco", "San Pedro de la Paz", "Santa Juana", "Talcahuano", "Tom√©", "Hualp√©n", "Lebu", "Arauco", "Ca√±ete", "Contulmo", "Curanilahue", "Los √Ålamos", "Tir√∫a", "Los √Ångeles", "Antuco", "Cabrero", "Laja", "Mulch√©n", "Nacimiento", "Negrete", "Quilaco", "Quilleco", "San Rosendo", "Santa B√°rbara", "Tucapel", "Yumbel", "Alto Biob√≠o"],
  "Araucan√≠a": ["Temuco", "Carahue", "Cunco", "Curarrehue", "Freire", "Galvarino", "Gorbea", "Lautaro", "Loncoche", "Melipeuco", "Nueva Imperial", "Padre Las Casas", "Perquenco", "Pitrufqu√©n", "Puc√≥n", "Saavedra", "Teodoro Schmidt", "Tolt√©n", "Vilc√∫n", "Villarrica", "Cholchol", "Angol", "Collipulli", "Ercilla", "Lonquimay", "Los Sauces", "Pur√©n", "Renaico", "Traigu√©n", "Victoria"],
  "Los R√≠os": ["Valdivia", "Corral", "Lanco", "Los Lagos", "M√°fil", "Mariquina", "Paillaco", "Panguipulli", "La Uni√≥n", "Futrono", "Lago Ranco", "R√≠o Bueno"],
  "Los Lagos": ["Puerto Montt", "Calbuco", "Cocham√≥", "Fresia", "Frutillar", "Los Muermos", "Llanquihue", "Maull√≠n", "Puerto Varas", "Castro", "Chonchi", "Curaco de V√©lez", "Dalcahue", "Puqueld√≥n", "Queil√©n", "Quell√≥n", "Quemchi", "Quinchao", "Osorno", "Puerto Octay", "Purranque", "Puyehue", "R√≠o Negro", "San Juan de la Costa", "San Pablo"],
  "Ays√©n": ["Coyhaique", "Lago Verde", "Ays√©n", "Cisnes", "Guaitecas", "R√≠o Ib√°√±ez", "Chile Chico", "Cochrane", "O'Higgins", "Tortel"],
  "Magallanes": ["Punta Arenas", "Laguna Blanca", "R√≠o Verde", "San Gregorio", "Cabo de Hornos", "Ant√°rtica", "Porvenir", "Primavera", "Timaukel", "Natales", "Torres del Paine"]
};

document.getElementById('region').addEventListener('change', function() {
  const region = this.value;
  const comunaSelect = document.getElementById('comuna');
  comunaSelect.innerHTML = '<option value="">- Seleccione la comuna -</option>';
  if (regionesComunas[region]) {
    regionesComunas[region].forEach(comuna => {
      const option = document.createElement('option');
      option.value = comuna;
      option.textContent = comuna;
      comunaSelect.appendChild(option);
    });
  }
});
</script>
<script>
function mostrarUsuarioNavbar() {
  const usuarioDiv = document.getElementById("usuario-navbar");
  let usuario = localStorage.getItem("usuarioLogueado");
  if (usuario) {
    usuario = JSON.parse(usuario);
    usuarioDiv.innerHTML = `<span class='fw-bold text-white me-2'>üë§ ${usuario.nombre}</span><button class='btn btn-danger btn-sm' onclick='cerrarSesion()'>Cerrar sesi√≥n</button>`;
  } else {
  usuarioDiv.innerHTML = `<a class='btn btn-light btn-sm fw-bold' href='login.html'>Iniciar sesi√≥n</a> <a class='btn btn-outline-dark btn-sm fw-bold' href='registro.html'>REGISTRAR</a>`;
  }
}
function cerrarSesion() {
  localStorage.removeItem("usuarioLogueado");
  mostrarUsuarioNavbar();
  location.reload();
}
window.addEventListener("storage", mostrarUsuarioNavbar);
document.addEventListener("DOMContentLoaded", mostrarUsuarioNavbar);
</script>
<script>
// Validaciones personalizadas para registro
document.addEventListener("DOMContentLoaded", function() {
  const form = document.getElementById("formRegistro");
  form.addEventListener("submit", function(e) {
    let valido = true;
    const run = document.getElementById("run");
    const nombre = document.getElementById("nombre");
    const apellidos = document.getElementById("apellidos");
    const correo = document.getElementById("correo");
    const direccion = document.getElementById("direccion");
    // RUN
    if (!/^\d{7,9}[0-9Kk]$/.test(run.value)) {
      run.classList.add("is-invalid");
      valido = false;
    } else {
      run.classList.remove("is-invalid");
    }
    // Nombre
    if (nombre.value.trim() === "" || nombre.value.length > 50) {
      nombre.classList.add("is-invalid");
      valido = false;
    } else {
      nombre.classList.remove("is-invalid");
    }
    // Apellidos
    if (apellidos.value.trim() === "" || apellidos.value.length > 100) {
      apellidos.classList.add("is-invalid");
      valido = false;
    } else {
      apellidos.classList.remove("is-invalid");
    }
    // Correo
    const dominios = ["@duoc.cl", "@profesor.duoc.cl", "@gmail.com"];
    if (!dominios.some(d => correo.value.endsWith(d))) {
      correo.classList.add("is-invalid");
      valido = false;
    } else {
      correo.classList.remove("is-invalid");
    }
    // Direcci√≥n
    if (direccion.value.trim() === "" || direccion.value.length > 300) {
      direccion.classList.add("is-invalid");
      valido = false;
    } else {
      direccion.classList.remove("is-invalid");
    }
    if (!valido) {
      e.preventDefault();
    } else {
      // Guardar usuario en localStorage
      let usuarios = JSON.parse(localStorage.getItem("usuarios")) || [];
      // Verificar si el correo ya existe
      if (usuarios.some(u => u.correo === correo.value)) {
        alert("Ya existe un usuario registrado con ese correo.");
        correo.classList.add("is-invalid");
        e.preventDefault();
        return;
      }
      usuarios.push({
        run: run.value,
        nombre: nombre.value,
        apellidos: apellidos.value,
        correo: correo.value,
        direccion: direccion.value,
        clave: run.value.slice(-4) // Clave por defecto: √∫ltimos 4 d√≠gitos del RUN
      });
      localStorage.setItem("usuarios", JSON.stringify(usuarios));
      alert("Usuario registrado con √©xito. Tu clave inicial son los √∫ltimos 4 d√≠gitos de tu RUN.");
      form.reset();
    }
  });
});
</script>
</body>
</html>