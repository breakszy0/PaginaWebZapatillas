<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Productos - Break Shoes</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/estilos.css">
</head>
<body>

  <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg bg-primary navbar-dark shadow-sm">
    <div class="container-fluid">
  <a class="navbar-brand fw-bold" href="index.html">👟 Break Shoes</a>
      <button class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#menu">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="menu">
        <ul class="navbar-nav me-auto">
          <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="productos.html">Productos</a></li>
          <li class="nav-item"><a class="nav-link" href="nosotros.html">Nosotros</a></li>
          <li class="nav-item"><a class="nav-link" href="blogs.html">Blogs</a></li>
          <li class="nav-item"><a class="nav-link" href="contacto.html">Contacto</a></li>
        </ul>
        <div class="d-flex gap-2">
          <a class="btn btn-outline-light btn-sm" href="carrito.html">🛒 Cart <span class="badge bg-danger" id="cart-count">0</span></a>
          <a class="btn btn-light btn-sm fw-bold" href="login.html">Iniciar sesión</a>
          <a class="btn btn-primary btn-sm" href="registro.html">Registrar</a>
            <span id="usuario-navbar"></span>
        </div>
      </div>
    </div>
  </nav>

  <div class="container py-5">
    <h2 class="text-center mb-5">Todos los Productos</h2>
    <div class="row g-4" id="lista-productos">
      <!-- JS cargará productos aquí -->
    </div>
  </div>

  <!-- FOOTER -->
  <footer class="bg-dark text-white text-center py-4">
    <div class="container">
  <p class="mb-0">&copy; 2025 Break Shoes - Todos los derechos reservados</p>
    </div>
  </footer>

<!-- ===== SCRIPT DENTRO DEL HTML ===== -->
<script>
function mostrarUsuarioNavbar() {
  const usuarioDiv = document.getElementById("usuario-navbar");
  let usuario = localStorage.getItem("usuarioLogueado");
  if (usuario) {
    usuario = JSON.parse(usuario);
    usuarioDiv.innerHTML = `<span class='fw-bold text-white me-2'>👤 ${usuario.nombre}</span><button class='btn btn-danger btn-sm' onclick='cerrarSesion()'>Cerrar sesión</button>`;
  } else {
    usuarioDiv.innerHTML = `<a class='btn btn-light btn-sm fw-bold' href='login.html'>Iniciar sesión</a> <a class='btn btn-primary btn-sm' href='registro.html'>Registrar</a>`;
  }
}
function cerrarSesion() {
  localStorage.removeItem("usuarioLogueado");
  mostrarUsuarioNavbar();
  location.reload();
}
window.addEventListener("storage", mostrarUsuarioNavbar);
document.addEventListener("DOMContentLoaded", mostrarUsuarioNavbar);

// Arreglo de productos completo
const productos = [
  {
    id: 1,
    nombre: "Air Jordan 3 Retro Black Cat",
    precio: 280000,
    imagen: "https://newcop.com/cdn/shop/files/01_ff7c9471-f6f5-470f-960b-08a527f6e8bf.png?height=600&v=1736528666"
  },
  {
    id: 2,
    nombre: "Adidas Campus 00S",
    precio: 94990,
    imagen: "https://newcop.com/cdn/shop/files/adidas-campus-00s-core-black-1_2000x_f891c99f-d7be-41e6-aa92-9000abde32d0.webp?v=1682784882"
  },
  {
    id: 3,
    nombre: "Nike Air Max 97",
    precio: 159990,
    imagen: "https://static.nike.com/a/images/t_PDP_864_v1/f_auto,b_rgb:f5f5f5/6a3671b8-f115-44f6-9ab6-3798d55210eb/custom-nike-air-max-97-shoes-by-you.png"
  }
];

const contenedor = document.getElementById("lista-productos");
contenedor.innerHTML = productos.map(producto => `
  <div class="col-md-4 d-flex align-items-stretch">
    <div class="card card-producto h-100 w-100 d-flex flex-column">
      <div class="d-flex align-items-center justify-content-center" style="min-height:220px;">
        <img src="${producto.imagen}" class="card-img-top" style="max-height:180px; object-fit:contain;" alt="${producto.nombre}">
      </div>
      <div class="card-body text-center d-flex flex-column justify-content-end flex-grow-1">
        <h5 class="card-title">${producto.nombre}</h5>
        <p class="card-text fw-bold">$${producto.precio.toLocaleString()}</p>
        <button class="btn btn-primary btn-sm w-100 mb-2" onclick="agregarCarrito(${producto.id}, '${producto.nombre}', ${producto.precio}, '${producto.imagen}')">Agregar al carrito</button>
        <a href="detalle-producto.html?id=${producto.id}" class="btn btn-outline-secondary btn-sm w-100 mb-2">Ver detalle</a>
      </div>
    </div>
  </div>
`).join("");

// Función para agregar productos al carrito
function agregarCarrito(id, nombre, precio, imagen) {
  let carrito = JSON.parse(localStorage.getItem("carrito")) || [];
  const existente = carrito.find(p => p.id === id);
  if (existente) {
    existente.cantidad += 1;
  } else {
    carrito.push({ id, nombre, precio, imagen, cantidad: 1 });
  }
  localStorage.setItem("carrito", JSON.stringify(carrito));
  alert(`Producto (${nombre}) agregado al carrito`);
}

// Agregar producto al carrito (localStorage)
function agregarCarrito(id, nombre, precio, imagen) {
  let carrito = JSON.parse(localStorage.getItem("carrito")) || [];
  const existente = carrito.find(p => p.id === id);
  if (existente) {
    existente.cantidad += 1;
  } else {
    carrito.push({ id, nombre, precio, imagen, cantidad: 1 });
  }
  localStorage.setItem("carrito", JSON.stringify(carrito));
  alert("Producto agregado al carrito");
}
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>